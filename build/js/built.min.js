const S=function(e,t){const s=document;return this.isS=!0,this.isNodeList=e=>{var t=Object.prototype.toString.call(e);return"object"==typeof e&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(t)&&"number"==typeof e.length&&(0===e.length||"object"==typeof e[0]&&0<e[0].nodeType)},this.isNode=e=>!(!e||!e.nodeType),this.isDocument=e=>e instanceof Document||e instanceof Window,this.isclass=e=>this.els[0].classList.contains(e),this.defineEls=()=>this.isNode(e)||this.isDocument(e)?[e]:this.isNodeList(e)?e:(t&&t.isS&&(t=t.els[0]),(this.isNode(t)?t:s).querySelectorAll(e)),this.defineEl=()=>this.els[0],this.els=this.defineEls(),this.el=this.defineEl(),this.on=(e,a,r,n)=>{const l=this;let c;return this.bind(e,e=>{var t=l.isNode(a)||l.isNodeList(a)?a:S(a).els,s=n||!1;let i=e.target;for(;i&&i!==this;){if(s)for(c=0;c<S(s).els.length&&i!==S(s).els[c];c++);for(c=0;c<t.length;c++)if(i===t[c]){r(e,i);break}if(!i)break;i=i.parentNode}}),this},this.strToNode=e=>{let t;var s;return t=this.isNode(e)?[e]:((s=this.create("div")).html(e),[s.el.children[0]]),this.els=t,this.el=t[0],this},this.css=function(e,t){if(!t&&""!==t)return this.els[0].style[e];for(var s=0;s<this.els.length;s++)this.els[s].style[e]=t;return this},this.data=(e,t)=>{if(!t&&""!==t)return this.els[0].dataset?this.els[0].dataset[e]:this.els[0].getAttribute(e);for(var s=0;s<this.els.length;s++){if(!this.els[s].dataset)return this.els[s].setAttribute(e,t);this.els[s].dataset[e]=t}return this},this.attr=(t,s)=>s?(this.els.forEach(e=>{e.setAttribute(t,s)}),this):this.el.getAttribute(t),this.create=e=>{e=s.createElement(e);return this.els=[e],this.el=e,this},this.append=e=>{this.el.append(e.el)},this.style=(t,s)=>(this.els.forEach(e=>{e.style[t]=s}),this),this.addclass=e=>{if(e)return Array.isArray(e)||(e=[e]),this.els.forEach(t=>{e.forEach(e=>{t.classList.add(e)})}),this},this.togclass=t=>(this.els.forEach(e=>{e.classList.toggle(t)}),this),this.delclass=e=>(Array.isArray(e)||(e=[e]),this.els.forEach(t=>{e.forEach(e=>{t.classList.remove(e)})}),this),this.remove=e=>{e=e.el;return s.body.contains(e)&&e.parentNode.removeChild(e),this},this.delStor=e=>(localStorage.removeItem(e),this),this.setStor=(e,t)=>(localStorage.setItem(e,t),this),this.getStor=e=>localStorage.getItem(e),this.bind=(t,s)=>{let i;if(t&&s){if("function"==typeof addEventListener)i=(e,t,s)=>{e.addEventListener(t,s,!1)};else{if("function"!=typeof attachEvent)return this;i=(e,t,s)=>{e.attachEvent("on"+t,s)}}this.isNodeList(this.els)||0<this.els.length?this.els.forEach(e=>{i(e,t,s)}):(this.isNode(this.els[0])||this.isDocument(this.els[0]))&&i(this.els[0],t,s)}return this},this.html=t=>""===t||t?(this.els.forEach(e=>{e.innerHTML=t}),this):this.els[0].innerHTML,this.text=t=>""===t||t?(this.els.forEach(e=>{e.innerText=t}),this):this.els[0].innerText,this.val=t=>""===t||t?(this.els.forEach(e=>{e.value=t}),this):this.els[0].value,this instanceof S?this.S:new S(e,t)},heightMenu=(!function(I,j){new function(){const e=I(".header_search_panel__store");var t=I(".instock_stores__cities"),s=I(".instock_stores__stores_list");const i=I("ul",t),a=I("ul",s),r=I(".overlay"),n=I("#select_store"),l=I("#close_store"),c=I(".instock"),o=I(".instock_stores__stores_list .search__input input"),d=(this.ObjectManager,this.searchString="",this.isSelectCity=!0,this.store_id=localStorage.getItem("current_store")||1,this.city_id=localStorage.getItem("current_city")||1,()=>j.reduce((e,t)=>{const{id:s,title:i}=t;return(e=e||[]).filter(e=>e.id==s).length?e:[...e,{id:s,title:i}]},[])),h=()=>this.searchString?j.filter(e=>-1!==e.store_title.toLowerCase().indexOf(this.searchString.toLowerCase())&&e.id==this.city_id):j.filter(e=>e.id==this.city_id),u=()=>{r.css("display","grid"),_()},p=()=>{r.css("display","none"),i.html(" "),a.html(" ")},_=()=>{d().forEach(e=>{var{id:e,title:t}=e,e=I().strToNode(`<li data-id="${e}">${t}</li>`);e.bind("click",m),i.append(e)}),f()},f=()=>{a.html(" "),I("#map").html(" "),h().forEach(e=>{var{rsa_id:e,store_title:t}=e,t=t.split(",")[1]+", "+t.split(",")[2],e=I().strToNode(`<li data-id="${e}"${e==this.store_id?' class="active"':""}>${this.isSelectCity?"":"<span>26 шт.</span>"}${t}</li>`);e.bind("click",b),a.append(e)}),S()},b=e=>{e=e.currentTarget;this.store_id=e.dataset.id,k(e.dataset.id),I("li",a).delclass("active"),I(e).addclass("active")},m=e=>{this.city_id=e.currentTarget.dataset.id,f()},g=e=>{this.store_id=e.dataset.id,v()},v=()=>{var e=j.filter(e=>e.rsa_id==this.store_id)[0].store_title.split(",");I(".header_search_panel__store .text").text(e[1]+", "+e[2]),I(".header_search_panel__store").addclass("selected"),localStorage.setItem("current_store",this.store_id),localStorage.setItem("current_city",this.city_id),p()},S=()=>{var e=h(),t=parseFloat(e[0].coordinates.split(",")[0]),s=parseFloat(e[0].coordinates.split(",")[1]),t=new ymaps.Map("map",{center:[t,s],zoom:3<e.length?12:14},{suppressMapOpenBlock:!0});this.objectManager=new ymaps.ObjectManager({clusterize:!0,gridSize:32,clusterDisableClickZoom:!0}),this.objectManager.objects.options.set("preset","islands#greenDotIcon"),this.objectManager.clusters.options.set("preset","islands#greenClusterIcons"),e.forEach(e=>{var t=parseFloat(e.coordinates.split(",")[0]),s=parseFloat(e.coordinates.split(",")[1]);this.objectManager.add({type:"Feature",id:e.rsa_id,geometry:{type:"Point",coordinates:[t,s]},properties:{hintContent:e.store_title,balloonContent:`<p>${e.store_title}</p><button class="button primary select_from_map" data-id="${e.rsa_id}">Выбрать</button>`},options:{iconLayout:"default#image",iconImageHref:"assets/icons/inactive_point.png",iconImageSize:[14,14],iconImageOffset:[-7,-7]}})}),this.objectManager.objects.events.add("click",function(e){k(e.get("objectId"))}),t.geoObjects.add(this.objectManager)},y=()=>{this.objectManager.objects.getAll().forEach(e=>{this.objectManager.objects.setObjectOptions(e.id,{iconImageHref:"assets/icons/inactive_point.png",iconImageSize:[14,14],iconImageOffset:[-7,-7]})})},k=e=>{var t=this.objectManager.getObjectState(e);t.isClustered?(this.objectManager.clusters.state.set("activeObject",this.objectManager.objects.getById(e)),this.objectManager.clusters.balloon.open(t.cluster.id)):this.objectManager.objects.balloon.open(e),y(),this.objectManager.objects.setObjectOptions(e,{iconImageHref:"assets/icons/active_point.png",iconImageSize:[24,24],iconImageOffset:[-12,-12]})},x=()=>{this.isSelectCity=!1,I(".instock_stores").addclass("product_instock"),u()},M=()=>{this.isSelectCity=!0,I(".instock_stores").delclass("product_instock"),u()},E=e=>{e=e.currentTarget;this.searchString=e.value,f()};ymaps.ready(function(){c.bind("click",x),e.bind("click",M),r.bind("click",p),n.bind("click",v),l.bind("click",p),I("#map").on("click",".select_from_map",(e,t)=>{g(t)}),I(".instock_stores").bind("click",e=>{e.stopPropagation()}),o.bind("input",E)})}}(S,Stores),!function(t){{const e={},s=t(".header_menu_panel__burger"),i=t(".burger",s),a=t("ul",s),r=t("ul > li",a),n=t(".header_menu_panel__list > li"),l=t(".header_menu_panel__list .sub_menu"),c=s=>{if(!s)return l;let i=0;return n.els.forEach((e,t)=>{e===s&&(i=t)}),t(l.els[i])},o=()=>{n.delclass("active"),i.delclass("active"),c().delclass("forburger"),c().css("display",""),a.css("display",""),clearTimeout(e.timerDisableBurgerMenu)},d=()=>{clearTimeout(e.timerDisableBurgerMenu),e.timerDisableBurgerMenu=setTimeout(o,500)};a.bind("mouseleave",()=>{d()}),l.bind("mouseleave",()=>{d()}),r.bind("click",e=>{if(a.css("display")){const i=e.currentTarget;let s=0;r.els.forEach((e,t)=>{e===i&&(s=t)}),r.delclass("active"),c().delclass("forburger"),t(i).addclass("active"),t(c().els[s]).addclass("forburger")}}),a.bind("mouseenter",()=>{clearTimeout(e.timerDisableBurgerMenu)}),l.bind("mouseenter",()=>{clearTimeout(e.timerDisableBurgerMenu)}),s.bind("click",e=>{e.currentTarget,e=a.css("display"),r.delclass("active"),e?o():(n.delclass("active"),a.css("display","block"),i.addclass("active"),c().css("display",""),t(c().els[0]).addclass("forburger"),t(r.els[0]).addclass("active"))}),n.bind("click",e=>{e=e.currentTarget,o(),t(e).addclass("active"),c(e).css("display","block")}),l.bind("click",e=>{e.stopPropagation()}),a.bind("click",e=>{e.stopPropagation()})}}(S),!function(j,T){function t(e){const t=j(e),s=625,i={interval:t.data("interval")},a=i.interval||1e4,r=j("ul",t),n=(r.html(r.html()+r.html()),j("ul > li",t)),l=n.els.length,c=l/2;let o=0;j(".banner_navigation_all_page",t).text(c),r.css("top",o+"px");const d=j(".but_next_prev.prev",t),h=j(".but_next_prev.next",t);let u,p=0,_=null,f=0;function b(r,n,l){r.timer&&clearInterval(r.timer),r.timer=setInterval(function(){let e=!0,t=parseInt((i=r.el,a=n,(i.currentStyle||getComputedStyle(i,null))[a])),s=(l-t)/8;var i,a;s=0<s?Math.ceil(s):Math.floor(s),t!==l&&(e=!1,r.css(n,t+s+"px")),e&&(clearInterval(r.timer),r.timer=null)},30)}const m=function(){0<f?f--:(f=Math.round(c-1),r.css("left",-(p*c)+"px")),y()},g=function(){f<l-1?f++:(f=c,r.css("left",-(p*(c-1))+"px")),y()},v=function(){clearInterval(_)},S=function(){_=setInterval(function(){g()},a)},y=function(){b(r,"left",-p*f),j(".banner_navigation_cur_page").text(Math.round(f%c)+1)},k=function(){var e=Math.round(t.el.offsetWidth);r.css("width",e*l+"px"),n.css("width",e+"px"),u=e,p=Math.round(u),_=setInterval(function(){g()},a)};var x,M,E;const I=function(){var e;850<j(".wrapper").el.offsetWidth||(e=t.el.offsetWidth<s?25:45,e=j(".wrapper").el.offsetWidth/3.16+e,t.css("height",e+o+"px"))};I(),j(T).bind("load",function(){!function(){const e=this;let t=this,s,i,a=null,r=0;function n(){r=+new Date,a=null,i=l.apply(t,s),a||(t=s=null)}const l=k()}()}),d.bind("click",function(){m()}),h.bind("click",function(){g()}),t.bind("mouseover",function(){v()}),t.bind("mouseout",function(){S()}),j(T).bind("resize",function(){clearInterval(_),_=null,I(),k()}),x=0,E=M=null,t.bind("touchend",function(){E&&(40<Math.abs(E)?(0<E?g:m)():r.css("left",parseInt(r.css("left").replace("px",""))+E+"px")),M=E=null,x=0,S()}),t.bind("touchstart",function(e){x=e.touches[0].pageX,v()}),t.bind("touchmove",function(e){var e=e.touches[0].pageX,t=(M=M||x)-e;E=0==t?null:x-e,r.css("left",parseInt(r.css("left").replace("px",""))-t+"px"),M=e})}j(".banner").els.forEach(e=>{t(e)})}(S,(document,window)),!function(S){function t(e){const t=S(e),a=S("ul",t),s=(e=S("li",a),S(".wrapper").el.offsetWidth),r=e.els.length*(e.el.offsetWidth+5),n=r-s,l=(a.el.style.width=r+"px",S(".but_next_prev.prev",t)),c=S(".but_next_prev.next",t),o=S(".progress_bar__line",t).el.offsetWidth,d=S(".progress_bar__line_slider",t),h=d.el.offsetWidth;let i=304;const u=e=>{b();let t=+a.el.style.left.replace(/[^0-9-]+/g,"")+i;0<t&&(t=0),f(t)},p=e=>{b();let t=+a.el.style.left.replace(/[^0-9-]+/g,"")-i;t<-n&&(t=-n),f(t)};let _;const f=i=>{var e,t;e="disabled",(t=i)==-n?c.addclass(e):c.delclass(e),0==t?l.addclass(e):l.delclass(e),t=i,d.el.style.left=-t*h*r/(s*o*4)+"px",_=setInterval(function(){var e=+a.el.style.left.replace(/[^0-9-]+/g,"");let t=!0;var s=0<(s=(i-e)/8)?Math.ceil(s):Math.floor(s);e!==i&&(t=!1,a.el.style.left=e+s+"px"),t&&b()},30)},b=()=>{clearInterval(_),_=null};var m,g,v;m=0,v=g=null,t.bind("touchend",e=>{v&&(console.log("route=",v),40<Math.abs(v))&&(0<v?p:u)(e),g=v=null,m=0}),t.bind("touchstart",e=>{m=e.touches[0].pageX}),t.bind("touchmove",e=>{var e=e.touches[0].pageX,t=(g=g||m)-e;v=0==t?null:m-e,g=e}),l.bind("click",e=>{u(e)}),c.bind("click",e=>{p(e)})}S(".offers").els.forEach(e=>{t(e)})}(S),S(".header_top_panel").el.offsetHeight+S(".header_search_panel").el.offsetHeight),panel=S(".header_menu_panel"),submenus=S(".sub_menu"),butInCart=S(".incart"),countPricesCart=(S(document).bind("scroll",()=>{window.scrollY>heightMenu?(panel.addclass("sticked"),submenus.addclass("forstick")):(panel.delclass("sticked"),submenus.delclass("forstick"))}),butInCart.bind("click",e=>{var e=e.currentTarget,t=e.children[0],s=S(t).text();S(e.parentElement).isclass("cart")||(S(e.parentElement).addclass("cart"),S(t).html(`<span class="minus">-</span><span class="qty">${s}</span><span class="plus">+</span>`))}),S(document).on("click",".plus",(e,t)=>{var t=S(t.parentElement),t=S(".qty",t),s=+t.text()+1;t.text(s)}),S(document).on("click",".minus",(e,t)=>{var t=S(t.parentElement),s=S(".qty",t),i=+s.text()-1;i<1?(t.html(1),S(t.el.parentElement.parentElement).delclass("cart")):s.text(i)}),S("header .cart").bind("click",()=>{countPricesCart(),S(".cart_popup").togclass("open")}),S(".delete_popup_cart").bind("click",e=>{var e=e.currentTarget,t=+S(".actions_button.cart").text()-1;let s=`<span>${t}</span>`;e=S(e.parentElement.parentElement);S().remove(e),countPricesCart(),0==t&&(s="",S(".cart_popup").togclass("open")),S(".actions_button.cart").html(s),S(".cart_popup__sum_head span").text(t)}),()=>{const t={current:0,old:0};S(".cart_popup__product_price > div").els.forEach(e=>{e=S(e).text().replace(" ₽"," ").replace(" ₽","").split(" ");t.current+=parseFloat(e[0]),t.old+=parseFloat(e[1])}),S(".cart_popup__sum_price").text(t.current+" ₽"),S(".cart_popup__sum_old_price").text(t.old+" ₽")});let timerCloseSearch;const startTimerCloseSearch=()=>{clearTimeout(timerCloseSearch),timerCloseSearch=setTimeout(closeSearch,500)},closeSearch=()=>{S(".header_menu_panel__actions .search__input input").val()||(S(".actions_button.search").css("visibility","visible"),S(".header_menu_panel__actions .search__input").delclass("active"))};S(".header_menu_panel .actions_button.search").bind("click",e=>{S(e.currentTarget).css("visibility","hidden"),S(".header_menu_panel__actions .search__input").addclass("active")}),S(".header_menu_panel__actions .search__input").bind("mouseleave",()=>{startTimerCloseSearch()}),S(".header_search_panel .actions_button.search").bind("click",e=>{var t=S(".header_search_panel .search__input");t.isclass("active")?(S(".header_menu_panel").css("marginTop","0.55em"),t.delclass("active")):(S(".header_menu_panel").css("marginTop","4em"),t.addclass("active"))});let current_store=localStorage.getItem("current_store");if(current_store){const Pc=Stores.filter(e=>e.rsa_id==current_store),Qc=Pc[0].store_title.split(",");S(".header_search_panel__store .text").text(Qc[1]+", "+Qc[2]),S(".header_search_panel__store").addclass("selected")}